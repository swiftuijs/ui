import{j as c}from"./jsx-runtime-QvZ8i92b.js";import{r as d,R as M}from"./index-uubelm5h.js";const H="sw-";function g(t){return`${H}${t}`}function w(...t){return t.reduce((e,n)=>{if(!n)return e;const s=typeof n;if(s==="string")return e.push(n),e;if(Array.isArray(n))return e.push(w(...n)),e;if(s==="object")return Object.keys(n).forEach(o=>{const r=n[o];if(typeof r=="function")try{r()&&e.push(o)}catch(i){console.error("clsx object function error",i,r)}else r&&e.push(o)}),e;if(s==="function"){try{e.push(w(n()))}catch(o){console.error("clsx function error",o,n)}return e}return e},[]).join(" ")}function N(t){return Object.keys(t).reduce((e,n)=>(n.startsWith("data-")&&(e[n]=t[n]),e),{})}function $(t,e){const n={};return(t.style||e.style)&&(n.style={...t.style,...e.style}),(t.className||e.className)&&(n.className=w(t.className,e.className)),Object.assign(n,N(t),N(e))}function E(t,e="px"){return typeof t=="number"?t+e:t}function p(t,e){const{style:n,className:s,alignment:o,transitionName:r,children:i,...u}=t,a=$({style:Object.assign({},n,r?{viewTransitionName:r}:{}),className:s},e);return a["data-transition-name"]=r,a["data-alignment"]=o,{children:i,commonProps:a,restProps:u}}async function S(t){t.update()}function C(t){return`${t}-${Math.random().toString(36).slice(2)}`}const k=typeof window<"u"&&typeof document<"u",P=k&&"ontouchstart"in document.documentElement,_=P?"touchstart":"mousedown",j=P?"touchmove":"mousemove",I=P?"touchend":"mouseup";function z(t,e=200){let n=0,s=0,o=0;return function(...r){const i=Date.now();clearTimeout(o),!n||i-n>e?s=e:s=e-(i-n),o=setTimeout(()=>{t(...r)},s),n=i}}const b={_events:{},on(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off(t,e){if(this._events[t]){if(!e){delete this._events[t];return}this._events[t]=this._events[t].filter(n=>n!==e)}},emit(t,...e){this._events[t]&&this._events[t].forEach(n=>{try{n(...e)}catch(s){console.warn("event bus error",t,s)}})}};function V(t){console.log("ZStack",t.alignment);const{children:e,commonProps:n,restProps:s}=p(t,{className:[g("zstack"),g("container")]});return c.jsx("div",{...n,...s,children:e})}V.__docgenInfo={description:"",methods:[],displayName:"ZStack",props:{alignment:{required:!1,tsType:{name:"EAlignment"},description:""}},composes:["IBaseComponent"]};const T=d.createContext({boxDirection:"row"}),D=t=>t&&typeof t=="object"&&!Object.isFrozen(t);function v(t){return D(t)&&(Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){if(!t.hasOwnProperty(e)||!D(t[e]))return;const n=Object.getOwnPropertyDescriptor(t,e);n&&(n.get||n.set)||v(t[e])})),t}function x(t,e){if(t===e||Number.isNaN(t)&&Number.isNaN(e))return!0;if(typeof t!="object"||typeof e!="object"||t===null||e===null||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!x(t[n],e[n]))return!1;return!0}const U=()=>{};function L(t,e){const{onChange:n=U}={};let s=v(typeof t=="function"?t():t);const o=new Set,r=i=>{const[u,l]=d.useState(i(s));return d.useEffect(()=>{const a=m=>{l(f=>{const y=i(m);return x(f,y)?f:v(y)})};return o.add(a),()=>{o.delete(a)}},[]),u};return{useStore(){const[i,u]=d.useState(!1);return d.useEffect(()=>{const l=()=>u(a=>!a);return o.add(l),()=>{o.delete(l)}},[]),s},getStore(){return s},setStore(i){const u=typeof i=="function"?i(s):i;x(s,u)||(s=v(u),o.forEach(l=>l(s)),n(s))},useSelector:r,useSelect:r}}const h=L([]);function F(){return h.useSelector(t=>({path:t,append:e=>{const n=e.type||"page";h.setStore(s=>{const o=s.findIndex(i=>i.id===e.id&&i.type===n);if(o===-1)return[...s,Object.assign({},e,{type:n})];if(o===s.length-1)return s;const r=s[o];return[...s.slice(o,1),r]})},removeLast:(e=1)=>{h.setStore(n=>n.slice(0,-e))},isEmpty:t.length===0,count:t.length,dismiss:()=>{h.setStore(e=>e.slice(0,-1))}}))}const W=h.useStore,R=L(null);if(k){const t=()=>{const e=window.innerWidth,n=window.innerHeight,s=e>n,o={width:e,height:n,landscape:s};R.setStore(o)};window.addEventListener("resize",z(t),{passive:!0}),t()}function Z(t){const{alignment:e="center",spacing:n,...s}=t,{commonProps:o,restProps:r,children:i}=p(s,{className:["sw-hstack","sw-container",`align-${e}`],style:{"--hstack-spacing":E(n||0)}});return c.jsx(T.Provider,{value:{boxDirection:"row"},children:c.jsx("div",{...o,...r,children:i})})}Z.__docgenInfo={description:"",methods:[],displayName:"HStack",props:{alignment:{required:!1,tsType:{name:"EAlignment"},description:`The guide for aligning the subviews in this stack.
 This guide has the same vertical screen coordinate for every child view.`},spacing:{required:!1,tsType:{name:"number"},description:`The distance between adjacent subviews,
 or nil if you want the stack to choose a default distance for each pair of subviews.`}},composes:["IBaseComponent"]};function Y(t){const{spacing:e,...n}=t,{children:s,commonProps:o,restProps:r}=p(n,{className:[g("vstack"),g("container")],style:{"--vstack-spacing":E(e||0)}});return c.jsx(T.Provider,{value:{boxDirection:"column"},children:c.jsx("div",{...o,...r,children:s})})}Y.__docgenInfo={description:"",methods:[],displayName:"VStack",props:{alignment:{required:!1,tsType:{name:"EAlignment"},description:""},spacing:{required:!1,tsType:{name:"number"},description:`The distance between adjacent subviews,
 or nil if you want the stack to choose a default distance for each pair of subviews.`}},composes:["IBaseComponent"]};function G(t){const{minLength:e,...n}=t,{commonProps:s,restProps:o}=p(n,{style:{"--min-length":E(e||0)},className:"sw-spacer"});return c.jsx("div",{...s,...o})}G.__docgenInfo={description:"",methods:[],displayName:"Spacer",props:{minLength:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""}},composes:["Omit"]};function X(t){const{lineLimit:e,...n}=t,s=e?{"--line-limit":e}:void 0,{commonProps:o,restProps:r,children:i}=p(n,{className:[g("text"),s?"line-clamp":!1],style:s});return c.jsx("div",{...o,...r,children:i})}X.__docgenInfo={description:"",methods:[],displayName:"Text",props:{lineLimit:{required:!1,tsType:{name:"number"},description:`The maximum number of lines to use for rendering text.
default to 0, which means no limit.`}},composes:["IBaseComponent"]};function J(t){const{direction:e,showsIndicators:n=!0,...s}=t,{commonProps:o,restProps:r,children:i}=p(s,{className:[g("scrollview"),e||"vertical",n?"":"no-scroll-bar"]});return c.jsx("div",{...o,...r,children:i})}J.__docgenInfo={description:"",methods:[],displayName:"ScrollView",props:{direction:{required:!1,tsType:{name:"union",raw:"'horizontal' | 'vertical'",elements:[{name:"literal",value:"'horizontal'"},{name:"literal",value:"'vertical'"}]},description:"The direction of the scroll view, default to vertical."},showsIndicators:{required:!1,tsType:{name:"boolean"},description:"Whether to show the scroll bar, default to true."}},composes:["IBaseComponent"]};function K(t){const e=d.useContext(T),{commonProps:n,restProps:s}=p(t,{className:`sw-divider ${e.boxDirection}`});return c.jsx("div",{...n,...s})}K.__docgenInfo={description:"",methods:[],displayName:"Divider",composes:["Omit"]};const O=d.forwardRef(function(e,n){const{type:s="page",...o}=e,{commonProps:r,restProps:i,children:u}=p(Object.assign({},o),{className:["sw-page"],"data-page-type":s});return c.jsx("div",{...r,...i,ref:n,children:u})});O.__docgenInfo={description:"",methods:[],displayName:"StandardPage",props:{type:{required:!1,tsType:{name:"literal",value:"'page'"},description:"page type, default to 'page'"}},composes:["IPageBaseComponent"]};function q(t){const e=d.useRef(null),n=g("dragbar");return d.useEffect(()=>{var m;if(!((m=t.container)!=null&&m.current)||!e.current)return;const s=t.container.current,o=e.current;let r=0,i=0;const u=f=>{f.preventDefault();const y=P?f.touches[0].clientY:f.clientY;i=Math.max(r-Math.max(20,y),200),s.style.height=`${i}px`},l=()=>{b.emit(t.eventToChangeDetent,i),document.removeEventListener(j,u),document.removeEventListener(I,l)},a=f=>{f.preventDefault(),r=s.getBoundingClientRect().bottom,document.addEventListener(j,u),document.addEventListener(I,l)};return o.addEventListener(_,a),()=>{o.removeEventListener(_,a)}},[t.container,t.eventToChangeDetent,e]),c.jsx("div",{className:n,ref:e,children:c.jsx("span",{className:g("dragbar-indicator")})})}q.__docgenInfo={description:"",methods:[],displayName:"DragBar",props:{eventToChangeDetent:{required:!0,tsType:{name:"string"},description:""},presentationDetents:{required:!0,tsType:{name:"Array",elements:[{name:"IPresentationDetent"}],raw:"IPresentationDetent[]"},description:""},container:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLDivElement | undefined",elements:[{name:"HTMLDivElement"},{name:"undefined"}]}],raw:"RefObject<HTMLDivElement | undefined>"},description:""}}};const Q={medium:"60%",large:"90%"},ee=800;function te(t){const e=R.useStore();return d.useMemo(()=>{const n=(e==null?void 0:e.height)||ee,s=t.map(r=>{if(typeof r=="number")return r;const i=Q[r]||r;if(!/^\d+%$/.test(i))throw new Error(`Invalid detent size: ${r}, should be a number or a percentage string like '60%'`);return Math.floor(n*parseFloat(i)/100)}),o=s[0];return{sizes:s.sort((r,i)=>r-i).filter((r,i,u)=>u.indexOf(r)===i),default:o}},[t,e])}function ne(t){const e=te(t.presentationDetents),n=d.useRef(e.sizes.indexOf(e.default)),s=d.useCallback(o=>{var l;if(!((l=t.container)!=null&&l.current))return;const r=t.container.current,i=()=>{r.classList.remove("animate-height"),r.removeEventListener("transitionend",i)};r.addEventListener("transitionend",i),r.classList.add("animate-height");const u=se(o,e.sizes);r.style.height=`${u}px`},[t.container,e]);d.useEffect(()=>{var i;if(!((i=t.container)!=null&&i.current))return;const o=t.container.current,r=e.sizes[n.current];`${r}px`!==o.style.height&&s(r)},[t.container,e,s]),d.useEffect(()=>(b.on(t.eventToChangeDetent,o=>{console.log("height",o),s(o)}),()=>{b.off(t.eventToChangeDetent)}),[t.eventToChangeDetent,s])}function se(t,e){for(let n=0;n<e.length;n++){const s=e[n];if(s>t&&n===0||n===e.length-1)return s;const o=e[n+1];if(!(t>o))return t-s<o-t?s:o}}const oe=["medium","large"],A=d.forwardRef(function(e,n){const s=d.useRef(null),o=d.useRef(`change-height-${Math.random().toString(36).slice(2)}`),{type:r,presentationDetents:i=oe,...u}=e,{commonProps:l,restProps:a,children:m}=p(Object.assign({},u),{className:["sw-page"],"data-page-type":r});return ne({container:s,eventToChangeDetent:o.current,presentationDetents:i}),d.useImperativeHandle(n,()=>s.current,[]),c.jsxs("div",{...l,...a,ref:s,children:[c.jsx(q,{eventToChangeDetent:o.current,container:s,presentationDetents:i}),m]})});A.__docgenInfo={description:"",methods:[],displayName:"ActionSheet",props:{presentationDetents:{required:!1,tsType:{name:"Array",elements:[{name:"IPresentationDetent"}],raw:"IPresentationDetent[]"},description:""},type:{required:!0,tsType:{name:"literal",value:"'actionsheet'"},description:"page type, default to 'page'"}},composes:["IPageBaseComponent"]};class B extends d.Component{constructor(e){super(e),this.containerRef=M.createRef(),this.pageType=e.type||"page",this.onPageExited=e.onPageExited}componentDidMount(){this.containerRef.current&&this.containerRef.current.setAttribute("date-page-status","entering")}render(){const{onPageExited:e,...n}=this.props;switch(this.pageType){case"actionsheet":return c.jsx(A,{...n,type:"actionsheet",ref:this.containerRef});default:return c.jsx(O,{...n,type:"page",ref:this.containerRef})}}exitPage(){if(!this.containerRef.current)return;const e=this.containerRef.current,n=()=>{e.removeEventListener("animationend",n),this.onPageExited&&this.onPageExited()};e.addEventListener("animationend",n),e.setAttribute("date-page-status","exiting")}}B.__docgenInfo={description:"",methods:[{name:"exitPage",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Page"};const re=C("home");function ie(t){const e=W(),{ignoreSafeArea:n,...s}=t,o={};n&&(n===!0?["top","right","bottom","left"]:n).reduce((m,f)=>(m[`--safe-area-${f}`]=0,m),o);const r=d.useMemo(()=>({component:()=>c.jsx(c.Fragment,{children:t.children}),type:"page",id:re}),[t.children]),i=d.useMemo(()=>{if(!e.length)return[r];const a=e.findLastIndex(m=>m.type==="page");return a===-1?[r,...e]:e.slice(a)},[e,r]),{commonProps:u,restProps:l}=p(s,{style:{...o},className:"sw-navigationstack"});return c.jsx("div",{...u,...l,children:i.map(a=>{const m=a.component;return c.jsx(B,{type:a.type,children:c.jsx(m,{})},`${a.type}$$${a.id}`)})})}ie.__docgenInfo={description:"",methods:[],displayName:"NavigationStack",props:{ignoreSafeArea:{required:!1,tsType:{name:"union",raw:"boolean | EEdge[]",elements:[{name:"boolean"},{name:"Array",elements:[{name:"EEdge"}],raw:"EEdge[]"}]},description:""},navigationDestination:{required:!1,tsType:{name:"string"},description:""}},composes:["IBaseComponent"]};function ae(t){const{commonProps:e,restProps:n,children:s}=p(t,{className:"sw-button"});return c.jsx("button",{...e,...n,children:s})}ae.__docgenInfo={description:"",methods:[],displayName:"Button",composes:["IBaseElementComponent"]};function ce(t){const{commonProps:e,restProps:n}=p(t,{className:"sw-image"});return c.jsx("img",{...e,...n})}ce.__docgenInfo={description:"",methods:[],displayName:"Image",composes:["Omit"]};function ue(t){const{destination:e,dismiss:n,pageOptions:s,...o}=t,r=F(),i=d.useRef(C("page")),{commonProps:u,restProps:l,children:a}=p(o,{className:"sw-navigationlink"}),m=d.useCallback(()=>{if(n){S({update:()=>r.removeLast(),type:"backwards"});return}if(!e){console.warn("NavigationLink: destination is not set");return}if(typeof e=="string"){window.location.href=e;return}S({update:()=>{r.append({component:e,type:s==null?void 0:s.type,id:i.current})},type:"forwards"})},[e,r,n]);return c.jsx("div",{...u,...l,onClick:m,children:a})}ue.__docgenInfo={description:"",methods:[],displayName:"NavigationLink",props:{destination:{required:!1,tsType:{name:"union",raw:"string | ComponentType",elements:[{name:"string"},{name:"ComponentType"}]},description:"next page component or url"},pageOptions:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  type: IPageType
}`,signature:{properties:[{key:"type",value:{name:"IPageType",required:!0}}]}},description:""},dismiss:{required:!1,tsType:{name:"boolean"},description:"dismiss current page (back to previous page)"}},composes:["IBaseComponent"]};export{ae as B,K as D,Z as H,ce as I,ue as N,G as S,X as T,Y as V,V as Z,ie as a,J as b};
