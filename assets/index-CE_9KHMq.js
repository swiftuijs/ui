import{j as d}from"./jsx-runtime-DEdD30eg.js";import{r as c,R as Y}from"./index-RYns6xqu.js";const N=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:{};function Z(t,e=200){let n=0,s=0,o=0;return function(...r){const i=Date.now();clearTimeout(o),!n||i-n>e?s=e:s=e-(i-n),o=setTimeout(()=>{t(...r)},s),n=i}}function C(t){return`${t}-${Math.random().toString(36).slice(2)}`}N.requestIdleCallback=N.requestIdleCallback||N.requestAnimationFrame||setTimeout;const G="sw-";function P(t){return`${G}${t}`}function j(...t){return t.reduce((e,n)=>{if(!n)return e;const s=typeof n;if(s==="string")return e.push(n),e;if(Array.isArray(n))return e.push(j(...n)),e;if(s==="object")return Object.keys(n).forEach(o=>{const r=n[o];if(typeof r=="function")try{r()&&e.push(o)}catch(i){console.error("clsx object function error",i,r)}else r&&e.push(o)}),e;if(s==="function"){try{e.push(j(n()))}catch(o){console.error("clsx function error",o,n)}return e}return e},[]).join(" ")}function $(t){return Object.keys(t).reduce((e,n)=>(n.startsWith("data-")&&(e[n]=t[n]),e),{})}function X(t,e){const n={};return(t.style||e.style)&&(n.style={...t.style,...e.style}),(t.className||e.className)&&(n.className=j(t.className,e.className)),Object.assign(n,$(t),$(e))}function D(t,e="px"){return typeof t=="number"?t+e:t}function m(t,e){const{style:n,className:s,alignment:o,children:r,...i}=t,a=X({style:n,className:s},e);return a["data-alignment"]=o,{children:r,commonProps:a,restProps:i}}const H=typeof window<"u"&&typeof document<"u",I=H&&"ontouchstart"in document.documentElement,q=I?"touchstart":"mousedown",O=I?"touchmove":"mousemove",A=I?"touchend":"mouseup",y={_events:{},on(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off(t,e){if(this._events[t]){if(!e){delete this._events[t];return}this._events[t]=this._events[t].filter(n=>n!==e)}},emit(t,...e){this._events[t]&&this._events[t].forEach(n=>{try{n(...e)}catch(s){console.warn("event bus error",t,s)}})}};function J(t){const{children:e,commonProps:n,restProps:s}=m(t,{className:[P("zstack"),P("container")]});return d.jsx("div",{...n,...s,children:e})}J.__docgenInfo={description:"",methods:[],displayName:"ZStack",props:{alignment:{required:!1,tsType:{name:"EAlignment"},description:""}},composes:["IBaseComponent"]};const L=c.createContext({boxDirection:"row"}),k=c.createContext({eventPrefix:"",append:()=>{},removeLast:()=>{},count:()=>0,dismiss:()=>{}});function K(){return c.useContext(k)}const B=t=>t&&typeof t=="object"&&!Object.isFrozen(t);function _(t){return B(t)&&(Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){if(!t.hasOwnProperty(e)||!B(t[e]))return;const n=Object.getOwnPropertyDescriptor(t,e);n&&(n.get||n.set)||_(t[e])})),t}function S(t,e){if(t===e||Number.isNaN(t)&&Number.isNaN(e))return!0;if(typeof t!="object"||typeof e!="object"||t===null||e===null||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!S(t[n],e[n]))return!1;return!0}function Q(t){return t instanceof Promise||t&&typeof t.then=="function"}const ee=()=>{};function te(t,e){const{onChange:n=ee}={};let s=_(t);const o=new Set,r=a=>{const[p,l]=c.useState(a(s));return c.useEffect(()=>{const u=f=>{l(g=>{const h=a(f);return S(g,h)?g:_(h)})};return o.add(u),()=>{o.delete(u)}},[]),p};function i(a){const p=typeof a=="function"?a(s):a,l=u=>{S(s,u)||(s=_(u),o.forEach(f=>f(s)),n(s))};if(Q(p))return p.then(u=>l(u));l(p)}return{useStore(){const[a,p]=c.useState(!1);return c.useEffect(()=>{const l=()=>p(u=>!u);return o.add(l),()=>{o.delete(l)}},[]),s},getStore(){return s},setStore:i,useSelector:r,useSelect:r}}const z=te(null);if(H){const t=()=>{const e=window.innerWidth,n=window.innerHeight,s=e>n,o={width:e,height:n,landscape:s};z.setStore(o)};window.addEventListener("resize",Z(t),{passive:!0}),t()}function ne(t){const{alignment:e="center",spacing:n,...s}=t,{commonProps:o,restProps:r,children:i}=m(s,{className:["sw-hstack","sw-container",`align-${e}`],style:{"--hstack-spacing":D(n||0)}});return d.jsx(L.Provider,{value:{boxDirection:"row"},children:d.jsx("div",{...o,...r,children:i})})}ne.__docgenInfo={description:"",methods:[],displayName:"HStack",props:{alignment:{required:!1,tsType:{name:"EAlignment"},description:`The guide for aligning the subviews in this stack.
 This guide has the same vertical screen coordinate for every child view.`},spacing:{required:!1,tsType:{name:"number"},description:`The distance between adjacent subviews,
 or nil if you want the stack to choose a default distance for each pair of subviews.`}},composes:["IBaseComponent"]};function se(t){const{spacing:e,...n}=t,{children:s,commonProps:o,restProps:r}=m(n,{className:[P("vstack"),P("container")],style:{"--vstack-spacing":D(e||0)}});return d.jsx(L.Provider,{value:{boxDirection:"column"},children:d.jsx("div",{...o,...r,children:s})})}se.__docgenInfo={description:"",methods:[],displayName:"VStack",props:{alignment:{required:!1,tsType:{name:"EAlignment"},description:""},spacing:{required:!1,tsType:{name:"number"},description:`The distance between adjacent subviews,
 or nil if you want the stack to choose a default distance for each pair of subviews.`}},composes:["IBaseComponent"]};function oe(t){const{minLength:e,...n}=t,{commonProps:s,restProps:o}=m(n,{style:{"--min-length":D(e||0)},className:"sw-spacer"});return d.jsx("div",{...s,...o})}oe.__docgenInfo={description:"",methods:[],displayName:"Spacer",props:{minLength:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""}},composes:["Omit"]};function re(t){const{lineLimit:e,...n}=t,s=e?{"--line-limit":e}:void 0,{commonProps:o,restProps:r,children:i}=m(n,{className:[P("text"),s?"line-clamp":!1],style:s});return d.jsx("div",{...o,...r,children:i})}re.__docgenInfo={description:"",methods:[],displayName:"Text",props:{lineLimit:{required:!1,tsType:{name:"number"},description:`The maximum number of lines to use for rendering text.
default to 0, which means no limit.`}},composes:["IBaseComponent"]};function ie(t){const{direction:e,showsIndicators:n=!0,...s}=t,{commonProps:o,restProps:r,children:i}=m(s,{className:[P("scrollview"),e||"vertical",n?"":"no-scroll-bar"]});return d.jsx("div",{...o,...r,children:i})}ie.__docgenInfo={description:"",methods:[],displayName:"ScrollView",props:{direction:{required:!1,tsType:{name:"union",raw:"'horizontal' | 'vertical'",elements:[{name:"literal",value:"'horizontal'"},{name:"literal",value:"'vertical'"}]},description:"The direction of the scroll view, default to vertical."},showsIndicators:{required:!1,tsType:{name:"boolean"},description:"Whether to show the scroll bar, default to true."}},composes:["IBaseComponent"]};function ae(t){const e=c.useContext(L),{commonProps:n,restProps:s}=m(t,{className:`sw-divider ${e.boxDirection}`});return d.jsx("div",{...n,...s})}ae.__docgenInfo={description:"",methods:[],displayName:"Divider",composes:["Omit"]};const U=c.forwardRef(function(e,n){const{type:s="page",...o}=e,{commonProps:r,restProps:i,children:a}=m(Object.assign({},o),{className:["sw-page"],"data-page-type":s});return d.jsx("div",{...r,...i,ref:n,children:a})});U.__docgenInfo={description:"",methods:[],displayName:"StandardPage",props:{type:{required:!1,tsType:{name:"literal",value:"'page'"},description:"page type, default to 'page'"}},composes:["IPageBaseComponent"]};function V(t){const e=c.useRef(null),n=P("dragbar");return c.useEffect(()=>{var u;if(!((u=t.container)!=null&&u.current)||!e.current)return;const s=t.container.current,o=e.current;let r=0,i=0;const a=f=>{f.preventDefault();const g=I?f.touches[0].clientY:f.clientY;i=Math.max(r-Math.max(20,g),200),s.style.height=`${i}px`},p=()=>{y.emit(t.eventToChangeDetent,i),document.removeEventListener(O,a),document.removeEventListener(A,p)},l=f=>{f.preventDefault(),r=s.getBoundingClientRect().bottom,document.addEventListener(O,a),document.addEventListener(A,p)};return o.addEventListener(q,l),()=>{o.removeEventListener(q,l)}},[t.container,t.eventToChangeDetent,e]),d.jsx("div",{className:n,ref:e,children:d.jsx("span",{className:P("dragbar-indicator")})})}V.__docgenInfo={description:"",methods:[],displayName:"DragBar",props:{eventToChangeDetent:{required:!0,tsType:{name:"string"},description:""},presentationDetents:{required:!0,tsType:{name:"Array",elements:[{name:"IPresentationDetent"}],raw:"IPresentationDetent[]"},description:""},container:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLDivElement | undefined",elements:[{name:"HTMLDivElement"},{name:"undefined"}]}],raw:"RefObject<HTMLDivElement | undefined>"},description:""}}};const ce={medium:"60%",large:"90%"},de=800;function ue(t){const e=z.useStore();return c.useMemo(()=>{const n=(e==null?void 0:e.height)||de,s=t.map(r=>{if(typeof r=="number")return r;const i=ce[r]||r;if(!/^\d+%$/.test(i))throw new Error(`Invalid detent size: ${r}, should be a number or a percentage string like '60%'`);return Math.floor(n*parseFloat(i)/100)}),o=s[0];return{sizes:s.sort((r,i)=>r-i).filter((r,i,a)=>a.indexOf(r)===i),default:o}},[t,e])}function pe(t){const e=ue(t.presentationDetents),n=c.useRef(e.sizes.indexOf(e.default)),s=c.useCallback(o=>{var p;if(!((p=t.container)!=null&&p.current))return;const r=t.container.current,i=()=>{r.classList.remove("animate-height"),r.removeEventListener("transitionend",i)};r.addEventListener("transitionend",i),r.classList.add("animate-height");const a=le(o,e.sizes);r.style.height=`${a}px`},[t.container,e]);c.useEffect(()=>{var i;if(!((i=t.container)!=null&&i.current))return;const o=t.container.current,r=e.sizes[n.current];`${r}px`!==o.style.height&&s(r)},[t.container,e,s]),c.useEffect(()=>(y.on(t.eventToChangeDetent,o=>{console.log("height",o),s(o)}),()=>{y.off(t.eventToChangeDetent)}),[t.eventToChangeDetent,s])}function le(t,e){for(let n=0;n<e.length;n++){const s=e[n];if(s>t&&n===0||n===e.length-1)return s;const o=e[n+1];if(!(t>o))return t-s<o-t?s:o}}const me=["medium","large"],F=c.forwardRef(function(e,n){const s=c.useRef(null),o=c.useRef(`change-height-${Math.random().toString(36).slice(2)}`),{type:r,presentationDetents:i=me,...a}=e,{commonProps:p,restProps:l,children:u}=m(a,{className:["sw-page"],"data-page-type":r});return pe({container:s,eventToChangeDetent:o.current,presentationDetents:i}),c.useImperativeHandle(n,()=>s.current,[]),d.jsxs("div",{...p,...l,ref:s,children:[d.jsx(V,{eventToChangeDetent:o.current,container:s,presentationDetents:i}),u]})});F.__docgenInfo={description:"",methods:[],displayName:"ActionSheet",props:{presentationDetents:{required:!1,tsType:{name:"Array",elements:[{name:"IPresentationDetent"}],raw:"IPresentationDetent[]"},description:""},type:{required:!0,tsType:{name:"literal",value:"'actionsheet'"},description:"page type, default to 'page'"}},composes:["IPageBaseComponent"]};const R=class R extends c.Component{constructor(e){super(e),this.containerRef=Y.createRef(),this.pageType=e.type||"page",console.log("[page] created",this.pageType,this.props.id)}componentDidMount(){if(!this.containerRef.current)return;const e=this.containerRef.current;if(this.props.noEnteringAnimation){y.emit(`${this.context.eventPrefix}.page-entered`,this.props.id);return}const n=()=>{y.emit(`${this.context.eventPrefix}.page-entered`,this.props.id),e.removeEventListener("animationend",n)};e.addEventListener("animationend",n),e.setAttribute("date-page-status","entering")}shouldComponentUpdate(e){return this.props.id!==e.id||this.props.type!==e.type}UNSAFE_componentWillUpdate(e){console.log("[page] update",this.pageType,this.props.id),console.log("[page] previous",this.props,"nextProps",e)}render(){console.log("[page] render",this.pageType,this.props.id);const{noEnteringAnimation:e,...n}=this.props;switch(this.pageType){case"actionsheet":return d.jsx(F,{...n,type:"actionsheet",ref:this.containerRef});default:return d.jsx(U,{...n,type:"page",ref:this.containerRef})}}exitPage(e){if(!this.containerRef.current)return;const n=this.containerRef.current,s=()=>{n.removeEventListener("animationend",s),e&&e()};n.addEventListener("animationend",s),n.setAttribute("date-page-status","exiting")}};R.contextType=k;let E=R;E.__docgenInfo={description:"",methods:[{name:"exitPage",docblock:`exit page
@param callback callback function executed after page exit animation is done
@returns`,modifiers:[],params:[{name:"callback",description:"callback function executed after page exit animation is done",optional:!0,type:{name:"IFn",alias:"IFn"}}],returns:null,description:"exit page"}],displayName:"Page"};const M=C("_index_");function fe(t){const e=c.useRef([]),n=c.useRef(`${C("navi")}`),s=c.useRef({eventPrefix:n.current,append:u=>y.emit(`${n.current}.append`,u),removeLast:(u=1)=>y.emit(`${n.current}.remove`,u),count:()=>e.current.length,dismiss:()=>y.emit(`${n.current}.remove`,1)}),o=c.useRef({}),r=c.useMemo(()=>({component:()=>d.jsx(d.Fragment,{children:t.children}),type:"page",id:M,_id:`page$$${M}`}),[t.children]),[i,a]=c.useState([r]);c.useEffect(()=>{const u=n.current,f={};return y.on(`${u}.append`,g=>{const h=g.type||"page",v=e.current,w=`${h}$$${g.id}`;let x;const T=v.findIndex(b=>b._id===w);if(!(v.length&&T===v.length-1)){if(T===-1){x=Object.assign({},g,{type:h,_id:w});let b=v.findLastIndex(W=>W.type==="page");b===-1&&(b=v.length-1),e.current=[...v.slice(0,b+1),x]}else x=v[T],e.current=[...v.slice(T,1),x];x.type==="page"&&(f[x._id]=()=>{a([x]),delete f[x._id]}),a(b=>[...b,x])}}),y.on(`${u}.remove`,g=>{if(!g||!e.current.length)return;const h=e.current[e.current.length-1];e.current=e.current.slice(0,-g);const v=o.current;if(h.type!=="page"){v[h._id]?v[h._id].exitPage(()=>{a(x=>x.slice(0,-g))}):a(x=>x.slice(0,-g));return}const w=e.current[e.current.length-1]||r;a([w,h]),requestIdleCallback(()=>{v[h._id]?v[h._id].exitPage(()=>{a([w])}):a([w])})}),y.on(`${u}.page-entered`,g=>{var h;(h=f[g])==null||h.call(f)}),()=>{y.off(`${u}.append`),y.off(`${u}.remove`),y.off(`${u}.page-entered`)}},[r]),o.current={};const{commonProps:p,restProps:l}=m(t,{style:{},className:"sw-navigationstack"});return{commonProps:p,restProps:l,pageInstances:o,shownPages:i,contextValue:s}}function ge(t){const{commonProps:e,restProps:n,shownPages:s,contextValue:o,pageInstances:r}=fe(t);return d.jsx(k.Provider,{value:o.current,children:d.jsx("div",{...e,...n,children:s.map((i,a)=>{const p=i.component;return d.jsx(E,{noEnteringAnimation:a===0||a<s.length-1,id:i._id,ref:l=>r.current[i._id]=l,type:i.type,children:d.jsx(p,{})},i._id)})})})}ge.__docgenInfo={description:"",methods:[],displayName:"NavigationStack",composes:["IBaseComponent"]};function he(t){const{commonProps:e,restProps:n,children:s}=m(t,{className:"sw-button"});return d.jsx("button",{...e,...n,children:s})}he.__docgenInfo={description:"",methods:[],displayName:"Button",composes:["IBaseElementComponent"]};function ye(t){const{commonProps:e,restProps:n}=m(t,{className:"sw-image"});return d.jsx("img",{...e,...n})}ye.__docgenInfo={description:"",methods:[],displayName:"Image",composes:["Omit"]};function ve(t){const{destination:e,dismiss:n,pageOptions:s,...o}=t,r=K(),i=c.useRef(C("page")),{commonProps:a,restProps:p,children:l}=m(o,{className:"sw-navigationlink"}),u=c.useCallback(()=>{if(n){r.removeLast();return}if(!e){console.warn("NavigationLink: destination is not set");return}if(typeof e=="string"){window.location.href=e;return}r.append({component:e,type:s==null?void 0:s.type,id:i.current})},[e,r,n,s]);return d.jsx("div",{...a,...p,onClick:u,children:l})}ve.__docgenInfo={description:"",methods:[],displayName:"NavigationLink",props:{destination:{required:!1,tsType:{name:"union",raw:"string | ComponentType",elements:[{name:"string"},{name:"ComponentType"}]},description:"next page component or url"},pageOptions:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  type: IPageType
}`,signature:{properties:[{key:"type",value:{name:"IPageType",required:!0}}]}},description:""},dismiss:{required:!1,tsType:{name:"boolean"},description:"dismiss current page (back to previous page)"}},composes:["IBaseComponent"]};function xe(t){const{destination:e,...n}=t,s=typeof e=="string"?e:e.href,{commonProps:o,restProps:r,children:i}=m(n,{className:"sw-Link"});return d.jsx("a",{...o,...r,href:s,children:i})}xe.__docgenInfo={description:"",methods:[],displayName:"Link",props:{destination:{required:!0,tsType:{name:"union",raw:"string | URL",elements:[{name:"string"},{name:"URL"}]},description:"next page component or url"},target:{required:!1,tsType:{name:"string"},description:"link target"}},composes:["IBaseComponent"]};function Pe(t){const{...e}=t,{commonProps:n,restProps:s,children:o}=m(e,{className:"sw-list"});return d.jsx("div",{...n,...s,children:o})}Pe.__docgenInfo={description:"",methods:[],displayName:"List",composes:["IBaseComponent"]};function be(t){const{...e}=t,{commonProps:n,restProps:s,children:o}=m(e,{className:"sw-section"});return d.jsx("div",{...n,...s,children:o})}be.__docgenInfo={description:"",methods:[],displayName:"Section",props:{header:{required:!1,tsType:{name:"ReactNode"},description:""}},composes:["IBaseComponent"]};export{he as B,ae as D,ne as H,ye as I,xe as L,ve as N,oe as S,re as T,se as V,J as Z,Pe as a,ge as b,be as c,ie as d,K as u};
